{"mappings":"AAAA,IAAIA,IAAM,8BAEV,SAASC,SACQC,SAASC,eAAe,cAC9BC,UAAUC,OAAO,SAC5B,CAEAC,eAAeC,MACX,IAAIC,EAAQN,SAASC,eAAe,SAASM,MAEzCC,QAAYC,MAAMX,IAAM,qBAAsB,CAC9CY,OAAQ,OACRC,QAAS,CAAE,eAAgB,oBAC3BC,KAAMC,KAAKC,UAAU,CAAER,YAKP,aAFHE,EAAIO,QAEZC,QACLC,QAAQZ,IAAI,WACZa,aAAaC,QAAQ,QAASb,GAC9Bc,MAAM,wCACNpB,SAASqB,cAAc,SAASC,WAAa,uFAI7CL,QAAQZ,IAAI,eACZe,MAAM,mCAEd,CAEA,SAASG,MACLL,aAAaM,QACbJ,MAAM,uBACV,CAMAhB,eAAeqB,WACXR,QAAQZ,IAAI,gBACZ,IAAIG,QAAYC,MAAMX,IAAM,iBACxB4B,QAAalB,EAAIO,OACrB,GAAoB,MAAhBW,EAAKV,OAAgB,CACrB,IAAIW,EAAQ3B,SAASC,eAAe,eAChC2B,EAAO,GACPb,EAAOF,KAAKgB,MAAMH,EAAKI,SAC3Bb,QAAQZ,IAAIU,GACZ,IAAK,IAAIgB,EAAI,EAAGA,EAAIhB,EAAKiB,OAAQD,IAC7BH,GAAQ,2FAGgBb,EAAKgB,GAAGE,gDACRlB,EAAKgB,GAAGG,QAAQnB,EAAKgB,GAAGI,SAASC,cAAcC,QAAQ,IAAI,IAAIA,QAAQ,IAAI,IAAIA,QAAQ,IAAI,+CAC3FtB,EAAKgB,GAAGf,kDACRD,EAAKgB,GAAGO,kDACR,IAAKC,KAAKxB,EAAKgB,GAAGS,MAAOC,4IAEmB1B,EAAKgB,GAAGW,qFAMhFzB,QAAQZ,IAAIuB,GACZD,EAAML,WAAaM,EACnBD,EAAMzB,UAAUyC,IAAI,aACxB,CACJ,CAEAvC,eAAewC,SAASC,GAEpB,IADmBC,QAAQ,eACT,OAClB,IAAIC,EAAKF,EAAEG,aAAa,WAEpB1C,EAAQY,aAAa+B,QAAQ,SAC7BzC,QAAYC,MAAMX,IAAM,kBAAmB,CAC3CY,OAAQ,SACRC,QAAS,CAAE,eAAgB,oBAC3BC,KAAMC,KAAKC,UAAU,CAAER,QAAMyC,SAG7BrB,QAAalB,EAAIO,OACF,MAAhBW,EAAKV,QACJI,MAAMM,EAAKI,SACX9B,SAASkD,SAASC,UAElB/B,MAAMM,EAAKI,QAGnB,CAvDI9B,SAASqB,cAAc,kBACvBJ,QAAQZ,IAAI,WACZoB,YAuDDzB,SAASC,eAAe,UACvBD,SAASC,eAAe,SAASmD,aAAa,OAAOtD,IAAI","sources":["src/assets/js/absen.js"],"sourcesContent":["let api = \"https://absen.rplsaci.tech/\"\n\nfunction getNav() {\n    let navbar = document.getElementById(\"navbar-cta\");\n    navbar.classList.toggle(\"hidden\");\n}\n\nasync function log() {\n    let token = document.getElementById(\"token\").value\n\n    let res = await fetch(api + \"api/checkAuthority\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ token }),\n    });\n\n    let json = await res.json()\n\n    if (json.status === 200) {\n        console.log(\"correct\")\n        localStorage.setItem(\"token\", token)\n        alert(\"Authorized, please click on continue\")\n        document.querySelector(\"#main\").innerHTML += `\n        <a href=\"./manageAbsen.html\" class=\"btn btn-wide\">Continue</a>\n        `\n    } else {\n        console.log(\"not correct\")\n        alert(\"Error Unauthorized Access Token\")\n    }\n}\n\nfunction out() {\n    localStorage.clear()\n    alert(\"Access Token Cleared\")\n}\n\nif (document.querySelector(\"#absen-table\")) {\n    console.log(\"Loading\")\n    loadData()\n}\nasync function loadData() {\n    console.log(\"Loading Data\")\n    let res = await fetch(api + \"api/showabsen\");\n    let data = await res.json();\n    if (data.status === 200) {\n        let table = document.getElementById(\"absen-table\");\n        let rows = \"\";\n        let json = JSON.parse(data.message)\n        console.log(json)\n        for (let i = 0; i < json.length; i++) {\n            rows += `\n            <tbody>\n        <tr class=\"bg-white\">\n            <td class=\"px-4 py-2\">${json[i].nama}</td>\n            <td class=\"px-4 py-2\">${json[i].kelas}${json[i].kelasStr.toUpperCase().replace(\"X\",\"\").replace(\"-\",\"\").replace(\" \",\"\")}</td>\n            <td class=\"px-4 py-2\">${json[i].status}</td>\n            <td class=\"px-4 py-2\">${json[i].alasan}</td>\n            <td class=\"px-4 py-2\">${(new Date(json[i].time)).toLocaleString()}</td>\n            <td class=\"px-4 py-2\">\n            <button onclick=\"deleteId(this)\" class=\"btn btn-primary\" data-id=\"${json[i]._id}\">Delete</button>\n            </td>\n        </tr>\n        </tbody>\n        `;\n        }\n        console.log(rows)\n        table.innerHTML += rows;\n        table.classList.add(\"table-auto\")\n    }\n}\n\nasync function deleteId(e){\n    let confirmation = confirm(\"Yakin kah ?\")\n    if(!confirmation) return\n    let id = e.getAttribute(\"data-id\")\n\n    let token = localStorage.getItem(\"token\")\n    let res = await fetch(api + \"api/deleteAbsen\", {\n        method: \"DELETE\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ token,id }),\n    });\n\n    let data = await res.json()\n    if(data.status === 200) {\n        alert(data.message)\n        document.location.reload()\n    } else {\n        alert(data.message)\n    }\n\n}\n\nif(document.getElementById(\"excel\")){\n    document.getElementById(\"excel\").setAttribute(\"href\",api+\"api/export\")\n}"],"names":["api","getNav","document","getElementById","classList","toggle","async","log","token","value","res","fetch","method","headers","body","JSON","stringify","json","status","console","localStorage","setItem","alert","querySelector","innerHTML","out","clear","loadData","data","table","rows","parse","message","i","length","nama","kelas","kelasStr","toUpperCase","replace","alasan","Date","time","toLocaleString","_id","add","deleteId","e","confirm","id","getAttribute","getItem","location","reload","setAttribute"],"version":3,"file":"login.4cf6c9e4.js.map"}